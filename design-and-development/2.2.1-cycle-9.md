# 2.2.1 Cycle 9

## Design

### Objectives

In this cycle I hope to add bullets which will be the main weapon in the game.

* [x] Add in zombie class that will be my enemy.
* [x] Make zombies spawn.
* [x] Add colliders for the zombie
* [x] Make the zombie die when a bullet hits them.

### Usability Features

### Key Variables

| Variable Name | Use                   |
| ------------- | --------------------- |
| Zombie        | The zombie class      |
| zombie        | The individual zombie |

### Pseudocode

```
class Zombie extends sprite{
    constructor (scene, x, y, texture)
    {
        super(scene, x, y, texture)
    }
    preUpdate (time, delta)
    {
        super.preUpdate(time, delta);

    }
}
```

```
create{
    //...
    zombie = new Zombie(100,100,zombieImg)
    collider(zombie, player)
    collider(zombie, worldLayer)
}

update
```

## Development

### Outcome

```javascript
import bulImg from './assets/bullet.png'

let bullet;
let angle = 90;
let control = false;
let delay = 600;

function collectIron(player, iron){
    //...
    if(ironCount == ironGoal){
        //...
        delay = (delay/3)*2
    }
    //...
}

function update (){
    //...
    if (this.input.mousePointer.isDown && control == false) {
        bullet = this.physics.add.sprite(player.x, player.y, 'bulletImg');

        this.physics.moveTo(bullet, this.input.mousePointer.worldX, this.input.mousePointer.worldY, 500)
        bullet.rotation = Phaser.Math.Angle.Between(player.x, player.y, this.input.mousePointer.worldX, this.input.mousePointer.worldY) - 80


        control = true;
        this.time.delayedCall(delay, function Bullet() {
            control = false;
        });
        this.physics.add.collider(bullet, worldLayer, function destroyBullet(){
            bullet.destroy(bullet.x, bullet.y)
        })
    }
}
//...
```

### Challenges



## Testing

### Tests

| Test | Instructions                        | What I expect                                                                           | What actually happens                                                   | Pass/Fail |
| ---- | ----------------------------------- | --------------------------------------------------------------------------------------- | ----------------------------------------------------------------------- | --------- |
| 1    | Run code                            | The player should be looking at the player's mouse.                                     | The player is not looking at the mouse at all now.                      | Fail      |
| 2    | Run code                            | The player should be looking at the player's mouse.                                     | As expected.                                                            | Pass      |
| 3    | Move the mouse                      | The player should follow the mouse.                                                     | Now it looks at  the mouse at the start and stops looking at the mouse. | Fail      |
| 4    | Move the mouse                      | The player should follow the mouse.                                                     | As expected.                                                            | Pass      |
| 5    | Move around the map.                | The player should face the mouse where ever they are on the map.                        | As expected.                                                            | Pass      |
| 6    | Press the mouse button.             | A bullet appears and is moving towards the mouse's position when the mouse was clicked. | As expected.                                                            | Pass      |
| 7    | Shoot at the wall                   | The bullet should disappear.                                                            | As expected.                                                            | Pass      |
| 8    | Hold down the mouse button.         | The bullets fire continuously but a delay between each time it is fired.                | As expected.                                                            | Pass      |
| 9    | Achieve the ironGoal and then fire. | The delay should be shorter.                                                            | As expected.                                                            | Pass      |

### Evidence

<figure><img src="../.gitbook/assets/image.png" alt=""><figcaption><p>Zombie has spawned.</p></figcaption></figure>
